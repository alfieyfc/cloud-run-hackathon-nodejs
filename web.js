const express = require('express');
const app = express();
const bodyParser = require('body-parser');
const utils = require('./util')
const util = require('node:util');

const math = require('mathjs')

const directions = ['N', 'E', 'S', 'W'];
const moves = ['T', 'F', 'R', 'L'];

const pHeight = process.env.P_HEIGHT || 10;
const wILHeight = 18;
const wILWidth = pHeight;
const wLOHeight = pHeight;
const wLOWidth = 4;

require('dotenv').config();

const port = process.env.PORT || 8080;
const myUrl = process.env.MY_URL || "https://foo.com";

app.use(bodyParser.json());

app.get('/', function (req, res) {
  res.send('Let the battle begin!');
});

app.post('/', function (req, res) {

  var arenaDims = req.body.arena.dims;
  var state = req.body.arena.state;
  var me = state[myUrl]

  var cells_length = arenaDims[0] * arenaDims[1]
  var cells = Array(cells_length).fill(0)
  for (key in state) {
    var i = state[key].x + state[key].y * arenaDims[0]
    cells[i] = state[key].score
  }

  var input = Array(cells_length + 6)
  input[0] = arenaDims[0]
  input[1] = arenaDims[1]
  input[2] = me.x
  input[3] = me.y
  input[4] = directions.indexOf(me.direction)
  input[5] = Number(me.wasHit)
  for (var i = 6; i < input.length; i++) {
    input[i] = cells[i - 6]
  }

  var wIL = [
    [
      0.2624235656863951,
      0.7416569849605033,
      0.6692110710159587,
      0.3790397934759247,
      0.8442075367131794,
      0.7355129299139554,
      0.94179380561212,
      0.0573351414247536,
      0.5411869513364466,
      0.6724491297171753
    ],
    [
      0.5239872635987668,
      0.8425163287994433,
      0.3641049459601646,
      0.5954596108114514,
      0.21796856499375172,
      0.5879972124903701,
      0.013724064379690537,
      0.04868967273414326,
      0.9439216273432498,
      0.31441811354935867
    ],
    [
      0.7953838490228378,
      0.2876308977867701,
      0.9664402794056295,
      0.5745093299337848,
      0.9927521155738379,
      0.703343228439274,
      1.0278121243401739,
      0.9704724571743604,
      0.0925748986247216,
      0.3786300973424712
    ],
    [
      0.5353171509842901,
      0.9031095232339843,
      0.8865612428980467,
      0.1205119302225545,
      0.6965275952217075,
      0.08292856285382078,
      0.5422536357733962,
      0.7131742070573319,
      0.16958575398073933,
      0.4859570743498003
    ],
    [
      0.7588709572532586,
      0.12383678385444985,
      0.7164587076582858,
      0.6462987899700876,
      1.0571661365706644,
      0.7841961782750826,
      0.8720697243246429,
      0.3286753143810617,
      0.6985423442861889,
      0.48608763695203594
    ],
    [
      0.3761522236672681,
      0.4038205575845315,
      0.8930647515719939,
      0.8690166304703539,
      0.20067813361326065,
      0.31139833935865424,
      0.40783882736606625,
      0.34181024467035326,
      0.7449594688295509,
      0.06691402833121218
    ],
    [
      0.6383896296078706,
      0.3991845117798285,
      0.8757156925865479,
      0.09988916527308644,
      0.4688240306987474,
      0.7729452482135442,
      0.8508280712530645,
      0.7367859235635225,
      0.48617329184063335,
      0.358083058532321
    ],
    [
      0.9306468811443709,
      0.3580168212549058,
      0.9963630331403579,
      0.781231935837877,
      0.26862367086594796,
      0.6442073820326091,
      0.2914372313785607,
      0.014570847447925805,
      0.746204466119126,
      0.4799083905432156
    ],
    [
      0.26181175902869813,
      0.5141024881682399,
      0.5582752225872094,
      0.41086449013052473,
      0.19249551398115505,
      0.19419118042240302,
      0.1332269937531141,
      0.7919295007172021,
      0.8572841682291681,
      0.7226666478466037
    ],
    [
      0.870663874658196,
      0.7515363470512649,
      0.3881576119401766,
      0.9016354426518085,
      0.4955771460065749,
      0.9649599199520109,
      0.3026309818305019,
      0.7855389063685526,
      0.5872939627309728,
      0.32293123091780035
    ],
    [
      0.8878299096165421,
      0.3104026632667456,
      0.7109179119691695,
      0.19825853765178558,
      0.0287588810432442,
      0.573395520217062,
      0.5607258812672113,
      0.527694546855497,
      0.14333652979484124,
      0.4235080583127202
    ],
    [
      0.57874231673643,
      0.7600976936261058,
      0.6841645898640338,
      0.4591209381667535,
      0.30132322264843814,
      0.6454794224824345,
      0.09398257292799489,
      0.4160562306637597,
      0.5683295163305688,
      0.47511112722758186
    ],
    [
      0.636706164374236,
      0.2770749449617003,
      0.9582124097715412,
      0.4312735908205074,
      0.3213653683970432,
      0.8785611654770816,
      0.41294861711400194,
      0.5028460111212691,
      0.9083148328773688,
      0.18203465295103327
    ],
    [
      0.6069520153022281,
      0.35635091876042346,
      0.2092242759187819,
      0.648858200014713,
      0.7896427414549869,
      0.5560613352696555,
      0.28937116283207165,
      0.07273439000091741,
      0.013189307940924877,
      0.2589239296830148
    ],
    [
      0.04183104725812348,
      0.2730579095344269,
      0.18252082858941623,
      0.9768545723647903,
      0.019777152162944178,
      0.612474113118666,
      0.4913492257308938,
      0.4760023040861001,
      0.8433558631510385,
      0.06904070037943533
    ],
    [
      0.33189000146813474,
      0.6989109177481696,
      1.0941399228185433,
      0.072350299370743,
      0.8951420522643883,
      0.945131800210109,
      0.18183420607396839,
      0.0529068578505898,
      0.5345782103660577,
      0.690903309180728
    ],
    [
      0.6806247724146777,
      0.3454047353509933,
      0.5113494107779034,
      0.2958454945233471,
      0.23371340640080215,
      0.47553304016464565,
      0.36140254500238167,
      0.14394725453206142,
      0.7692217795156719,
      0.7065077014952019
    ],
    [
      1.0902621366128769,
      0.44375210094460954,
      0.7559633751120443,
      0.5038442000717855,
      0.9225059954530614,
      0.8192466078238887,
      0.25497470160440505,
      0.34346474716357833,
      0.9894673213756611,
      0.6957784566958956
    ],
    [
      0.42287545183549646,
      0.06654550816496836,
      1.0787936437373922,
      0.5399729940445286,
      0.1648902543613479,
      0.597802467954238,
      0.43963425527081773,
      0.47891580932068395,
      0.8685230285488393,
      0.6622687269596627
    ],
    [
      0.8248966124715544,
      0.35447079489006766,
      0.05229365014631045,
      0.07915270759261127,
      0.11265419481454231,
      0.026819909568115065,
      0.40638406924347614,
      0.6646006124579208,
      0.33831992097228136,
      0.43452522732476495
    ],
    [
      0.43224023271367273,
      0.69314150011523,
      1.0292921429738484,
      0.02289555884804062,
      0.5422491979488009,
      0.059027599460879765,
      0.8523840966351187,
      0.623064265313301,
      0.07402215641015922,
      0.27661938361784566
    ],
    [
      0.836241842213413,
      0.41927395099655707,
      0.6230143759442539,
      0.3287207620688019,
      0.16776947565424236,
      0.3298247139644459,
      0.8964374962710786,
      0.9632980738288319,
      0.19437492044217142,
      0.25776231683248246
    ],
    [
      0.2656329327625604,
      0.9764534395896205,
      0.5084434219113472,
      0.6002772500440492,
      0.6779903666481937,
      0.4025770161261024,
      0.8282983356578413,
      0.5318354741475997,
      0.6136949587600433,
      0.20837763078825766
    ],
    [
      0.137429347786173,
      0.6158068662161508,
      0.4269273614732311,
      0.3377438161038675,
      0.9923515436047314,
      0.09252330863719949,
      0.20385720572886856,
      0.17828216469565863,
      0.9189807488317723,
      0.03529709792360265
    ],
    [
      0.15426476146703505,
      1.018559711154748,
      0.21915816595280413,
      0.3703576349036554,
      0.20912440775679514,
      0.731097077459596,
      0.3818679778780609,
      0.580064080872795,
      0.7775211160695235,
      0.7615521757487163
    ],
    [
      0.37429460301631123,
      0.7938617583503592,
      0.9638707854602004,
      0.793977378415387,
      0.6494695587707653,
      0.4835753618305516,
      0.5005196069512217,
      0.3603182665078475,
      0.34491158231174324,
      0.6540167147422384
    ],
    [
      0.7149319114800408,
      0.039791715042866826,
      0.6268371644946722,
      0.11665501063392159,
      0.7369385031294591,
      0.11245566240875515,
      0.569400086613524,
      0.2692179686931293,
      0.5625341319551744,
      0.618196251254263
    ],
    [
      0.8247035927822848,
      0.19586429131483518,
      0.19529847151053037,
      0.14787895844740162,
      0.07436462258319687,
      0.8307767256259102,
      0.9018550734139397,
      0.3654733310913578,
      0.857891729381939,
      0.5467847487332167
    ],
    [
      0.7297074713973497,
      0.7553671422566488,
      0.0823849345682599,
      0.16094992158890808,
      0.4875791868525332,
      0.9559882323480764,
      0.9205002192261087,
      0.5963385814146822,
      0.32803822271340366,
      0.2010575352410847
    ],
    [
      0.3910997356864372,
      0.6244781137043927,
      0.7324476797925905,
      0.6372011446469764,
      0.5067077127904251,
      0.6957711737957251,
      0.8556224555329899,
      0.4456240703630878,
      0.011214424324071492,
      0.3314218534072777
    ],
    [
      0.6882466781048633,
      1.094785900171183,
      0.49990927972693533,
      0.18758763908532577,
      0.7919107009020123,
      0.5884615486676684,
      0.6724769629118841,
      0.01857922420807423,
      0.814048325407034,
      0.9746508662612101
    ],
    [
      0.6868328043121898,
      0.42389781597821674,
      0.2030514835165953,
      0.9115421397762762,
      0.5908795301338712,
      0.8801484894855519,
      0.5624909833044733,
      0.2258272962901041,
      0.18942766172454584,
      0.49328534338721386
    ],
    [
      0.4765118745558412,
      0.507543913622216,
      0.844256052130102,
      0.5531700766312312,
      0.6845708926436639,
      0.12820273036805463,
      0.43849717115774944,
      0.6045925368616634,
      0.38396930795606976,
      0.9497047051285217
    ],
    [
      0.016404157310821676,
      0.49226963642162347,
      0.3903217267871035,
      0.1814571001456835,
      0.010239528667239872,
      0.32109625894449406,
      0.5317842662452499,
      0.9790601516021471,
      0.26417238538266524,
      0.7345993662872371
    ],
    [
      0.05945012380373547,
      0.4158885444834701,
      1.2069153559181622,
      0.0033259132421821214,
      0.7890488258362744,
      0.007224764039728271,
      0.8700055783793814,
      0.9937789678606195,
      0.028268260503709675,
      0.7607931545209337
    ],
    [
      0.8515628959713057,
      0.7677335840720705,
      0.851732875533874,
      0.5983536108701253,
      0.10396119918508072,
      0.7700263077792229,
      0.7840526028096619,
      0.6901174881539426,
      0.27463304762637053,
      0.07183620432127989
    ],
    [
      0.3864777242312232,
      0.5695752733518116,
      0.771175868793825,
      0.36531836937544765,
      0.8964803913350066,
      0.822208339730897,
      0.8527013595718391,
      0.33170831208640794,
      0.8658412066096083,
      0.9853523218515321
    ],
    [
      0.2693787763295367,
      0.18448674268814555,
      0.762715503248331,
      0.46195510556607206,
      0.7776315410856854,
      0.3297402164155965,
      0.9929220408547241,
      0.5326859206949487,
      0.7064826923655055,
      0.12464398149162839
    ],
    [
      0.46503204137571963,
      0.17288681296621866,
      0.34059220940783175,
      1.0894542457424872,
      0.7369198280856293,
      0.7972863531241832,
      0.415633990041234,
      0.9536751990462975,
      0.08886629861038875,
      0.9135264706682642
    ],
    [
      0.3961209770253158,
      0.9527838919444018,
      0.5092115934757278,
      0.28202904078049174,
      0.2553122483636838,
      0.2825583757818042,
      0.9308962687808764,
      0.03331879168809104,
      0.8516835632508264,
      0.5223646061236944
    ],
    [
      0.7544678248023081,
      0.836128507771944,
      0.6915622158224063,
      0.7184850660510321,
      0.5498956704077161,
      0.8012129150519636,
      0.7439109589193201,
      1.0789801332459328,
      0.3681889565918392,
      0.14309971750222786
    ],
    [
      0.843890693713968,
      0.6839843844161395,
      0.5711114087136744,
      0.7858137697850693,
      0.8758616149369723,
      0.6041550572735598,
      0.42452848084110095,
      0.2746226637268492,
      0.11285187653192574,
      0.44654440997672307
    ],
    [
      0.9504646399799626,
      0.7139936066028874,
      0.36246589627284254,
      0.23508973567674296,
      0.5167310762282775,
      0.9804748122829464,
      0.7163076436345786,
      0.4840023071635711,
      0.644121126142886,
      0.2905120585070313
    ],
    [
      0.17450213334725873,
      0.6426037976986335,
      0.7716055093058594,
      0.2840429551198517,
      0.7157028789230306,
      0.4195141511009547,
      0.08080690651942435,
      0.9091309148198188,
      0.21655772072981705,
      0.7541109002775244
    ],
    [
      0.6935410346606306,
      0.05455657820851023,
      0.7878488946239375,
      0.6694344445174985,
      0.0812382420423936,
      0.7640470335023022,
      0.11984842201405721,
      0.8386983743939499,
      0.7311560069240451,
      0.12245270539907249
    ],
    [
      0.12245985961514494,
      0.10383348535682257,
      0.6212321833461212,
      0.03417784241649513,
      0.22325707579593068,
      0.7741569207133421,
      0.8822260021511605,
      0.2710686980542253,
      0.19906726840060474,
      0.08073460217813769
    ],
    [
      0.11911782334362446,
      0.8836772156004755,
      0.2904003651060614,
      0.8680234462687553,
      0.3606611066934619,
      0.967817922251671,
      0.041260431819782055,
      0.3973888266207387,
      0.3166472321146148,
      0.12428395192809405
    ],
    [
      0.6232849984987701,
      0.9488944343501211,
      0.3854522886382844,
      0.02649219796864699,
      0.3439279162892972,
      0.9378019924449319,
      0.007726565188519219,
      0.6572455802182389,
      0.6838702599922728,
      0.500335495671139
    ],
    [
      0.2853869801003417,
      0.10742661874221017,
      0.38233175904268046,
      0.4682855787308923,
      0.6075636070968813,
      0.2817761533260873,
      0.9001297133378624,
      0.7136318958385224,
      0.580245801516102,
      0.540911850689384
    ],
    [
      0.3430729279925502,
      0.296310360892164,
      0.8711775743585278,
      0.61261321269689,
      0.46362108560814946,
      0.2195487274632545,
      0.37174327760118,
      0.8266951173497463,
      0.6052598881686142,
      0.2706044055735837
    ],
    [
      0.943435564958371,
      0.1388235591849225,
      1.166266509158467,
      0.7827817663569803,
      0.4341663091939463,
      0.4466320948905711,
      0.5616555685019692,
      0.5029447860332353,
      0.9254265557471213,
      0.1395059163865433
    ],
    [
      0.09945274808769122,
      0.1845758517604835,
      0.696620138967538,
      0.29489245145558085,
      0.433722600945482,
      0.7847364060426804,
      0.2832078887747932,
      0.5910371334811253,
      0.1712944294118155,
      1.2095808717969552
    ],
    [
      0.42053833131391294,
      0.5765240322229359,
      0.09609556821039418,
      0.2996771297441261,
      0.18586832271301912,
      0.58446494615439,
      0.3335299583824226,
      0.5474319691706387,
      0.3948836517853967,
      0.8394748745523365
    ],
    [
      0.9977185095599863,
      0.15681717424470026,
      0.6285589663218873,
      0.2357598939754005,
      0.814584360236619,
      0.5436596605305395,
      0.11371865372655043,
      0.8417542137384088,
      0.37610475646030184,
      0.09186739171301594
    ],
    [
      0.7059312874907544,
      0.8081289234689597,
      0.37307418379834356,
      0.4797070960802535,
      0.8003321663285736,
      0.7509488325079168,
      0.9618908706940419,
      0.39773592291410004,
      0.4649196366606874,
      0.9558000391201189
    ],
    [
      0.5446782855207755,
      0.02166164081072084,
      0.8861592955886257,
      0.7920868332787286,
      0.6067032990749794,
      0.03373004254464229,
      0.7303259259939469,
      0.30901026476454196,
      0.8036252796681507,
      0.4939731575224338
    ],
    [
      0.8391854892897955,
      0.40097642640936215,
      0.5955846440735391,
      0.09045985080101117,
      0.8219957526975294,
      0.712629087898619,
      0.2856383696803997,
      0.6983542006017822,
      0.5464128243342486,
      0.6318908121633419
    ],
    [
      0.031701842137798364,
      0.5314189208503242,
      0.14517106116199963,
      0.2767691831175436,
      0.9402986986515225,
      0.13717684749392833,
      0.5824733606878458,
      0.6400288630963136,
      0.4860410798768431,
      0.718836928947225
    ],
    [
      0.49388762464459623,
      0.6445260208146383,
      0.12700980839247444,
      0.409653405359556,
      0.2845120338909229,
      0.7601949410069309,
      0.5417124691702544,
      0.7532961530065367,
      0.09837124635251437,
      0.46074250954080426
    ],
    [
      0.603785237183011,
      0.5727448563585047,
      0.7920461905238019,
      0.7107214443719263,
      0.25817955233261713,
      0.6634840432650317,
      0.7219106250891558,
      0.522471433045288,
      0.6004306490575548,
      0.07551255260222156
    ],
    [
      0.6498454088660399,
      0.5176461755512329,
      0.8134929785677039,
      0.06413858791065467,
      0.5264650722930553,
      0.6601767921058079,
      0.8998981926974026,
      0.0023495970433845327,
      0.6291924352916425,
      0.07120739012509691
    ],
    [
      0.9203703973306112,
      0.8014248213905373,
      0.20125007271394105,
      0.709293407714092,
      0.7076763322654558,
      1.008486481978234,
      0.35341043584958565,
      0.8374941930871468,
      0.4734889648807648,
      0.904346028554872
    ],
    [
      0.5591973768129808,
      0.21528325211144317,
      0.9106977112394807,
      0.011896141297903062,
      0.939874573991538,
      0.21434963962752993,
      0.5875386650497827,
      0.6798930540307604,
      0.00481292557738362,
      0.09510107479115934
    ],
    [
      0.8815138341421012,
      0.5690017766864099,
      0.0008161874484113874,
      0.4688555079626519,
      0.5086572660692319,
      0.614833959185608,
      0.5811989857490598,
      0.9027343997304234,
      0.679468535578331,
      0.22351041697980878
    ],
    [
      0.8379087075323819,
      0.6228881870778219,
      0.07878598155543615,
      0.3389194039114698,
      0.9937665980288641,
      0.18497115656190966,
      0.2794576609702082,
      0.5249299933278377,
      0.05990259143639953,
      0.453339380220371
    ],
    [
      0.17467834431132712,
      0.9658073561144496,
      0.2837182044194548,
      0.24412149978627395,
      0.7573668538662348,
      0.5122400755912764,
      0.30411958815780804,
      0.1749664010497689,
      0.15866937894216077,
      0.3735734848100202
    ],
    [
      0.9558188910800263,
      0.08140128878080777,
      0.6370214080347878,
      0.8868636124903735,
      0.1752453247131569,
      0.926209844219542,
      0.6465635334120923,
      0.41286397193077023,
      0.15742410166058549,
      0.29626637508492976
    ],
    [
      0.3160501849353943,
      0.5686055239211759,
      0.979950283168449,
      0.07323977948367398,
      0.6568978450638698,
      0.5879956547645648,
      0.8880584420021536,
      0.3664327162626271,
      0.9214473344595095,
      0.1974599035047912
    ],
    [
      0.904102254999841,
      0.11774055686268547,
      0.31351275630567765,
      0.8827092764206557,
      0.4241908900625404,
      0.16486632547077984,
      0.031007803656487587,
      0.1614538798332501,
      0.26625223549670873,
      0.5866478180846131
    ],
    [
      0.6046602614787078,
      0.0545051218841861,
      0.14349058161434666,
      0.4059127515525845,
      0.8320717954763497,
      0.4928331315811988,
      0.4790803693290626,
      0.9273679011922384,
      0.3537416101027856,
      0.9284209406965581
    ],
    [
      0.7392413413909953,
      0.9806561685680695,
      0.09529981306956081,
      0.27489393157816827,
      0.22894777631414645,
      0.7911648274212709,
      0.6963884006156044,
      0.2381035840792549,
      0.7953817743534147,
      0.5150470602582891
    ],
    [
      0.9983644228065178,
      0.1859118401218558,
      0.8999660002029799,
      0.09836416581891316,
      0.4410307644095959,
      0.8623026262337785,
      0.006879141362096087,
      0.744558803964094,
      0.26868314743661464,
      0.35425803927338784
    ],
    [
      0.8210284443608089,
      0.6733756171098075,
      0.16120585348408675,
      0.6767020733269604,
      0.7819779601109631,
      0.5042819057324601,
      1.0247477338697502,
      0.9560050462900134,
      1.0609250742909595,
      0.023878780437407744
    ],
    [
      0.1725360771254476,
      0.494067410089611,
      0.2984439171923696,
      0.16857172937937248,
      0.8857809021636687,
      0.5166034294069533,
      0.29194154888836216,
      0.18475626247627955,
      0.7805192024278016,
      0.8552452514288462
    ],
    [
      0.49296372425077806,
      0.3567875723364038,
      0.7970042477419534,
      0.9683015020368619,
      0.2575558781337799,
      0.49181261556532063,
      0.0734160272277578,
      0.47153300180408286,
      0.12221125391609089,
      0.18005136321688428
    ],
    [
      0.15554057702714075,
      0.9766754019938468,
      0.34656049508924935,
      0.571392798840602,
      0.6486308787044663,
      0.06311028201930213,
      0.0003897761215323481,
      0.6884696454750256,
      0.0592935959115628,
      0.08139858307466574
    ],
    [
      0.42460374944976353,
      0.5257602019853106,
      0.31390060859114177,
      0.5102083258238752,
      0.3954003872903187,
      0.733710290451163,
      0.3403905479101885,
      0.45372568179442263,
      0.5567426501262119,
      0.16636036603890325
    ],
    [
      1.0212530041531593,
      0.22484256165812355,
      1.0341633100320886,
      0.24140677659994503,
      0.21074223775519485,
      0.9635404126924496,
      0.051395628698571574,
      0.9058979631239141,
      0.2705140419332093,
      0.405871660929602
    ],
    [
      0.8066685605621439,
      0.963209369046028,
      0.10339235454571667,
      0.7721012783469636,
      0.9373348716624446,
      0.4018309527232033,
      0.3343186599605763,
      0.1193146708538345,
      0.14416166953637272,
      0.294504242058989
    ],
    [
      0.5267968696708719,
      0.30047578800141883,
      0.8117907070547501,
      0.8527752763549051,
      0.29630932126145093,
      0.8317171773948907,
      0.9004864112897045,
      0.30465966373763176,
      0.8824982361674745,
      0.27761939647375244
    ],
    [
      0.5713675744529234,
      0.5884083939996552,
      0.7094870480493665,
      0.6111882215338709,
      0.4884759178726541,
      0.3684627770125917,
      0.06301255441952835,
      0.00022939758205309246,
      0.05558228886495176,
      0.1332375990531941
    ],
    [
      0.10728626000623365,
      0.39794235009071555,
      0.38060237457016965,
      0.00863576239011854,
      0.7898249417487982,
      0.5314342034270545,
      0.6365633015586015,
      0.13121733168739302,
      0.8591483980663143,
      0.2559719144695176
    ],
    [
      0.3056083454223044,
      0.7460283318346884,
      0.9469217585054992,
      0.8076027300671116,
      0.5569701015725197,
      0.5802705421704168,
      0.628078398469341,
      0.9406877147033972,
      0.684478695899978,
      0.5525373762612293
    ],
    [
      0.32107112564226137,
      0.057429499467708256,
      0.7402288411607978,
      0.8456677308088634,
      0.9475319689481725,
      0.5583228904345408,
      0.05872833928696375,
      0.7953009933639816,
      0.42916046601463753,
      0.7152195383449713
    ],
    [
      0.128102812540515,
      0.9098636828391009,
      0.890602848341769,
      0.5469919565044181,
      0.2219485652123767,
      0.29565486493607573,
      0.15131370661221122,
      0.7958300456192401,
      0.5019436467017876,
      1.0340242157127906
    ],
    [
      0.8258022123319768,
      0.7640537820346511,
      0.8163133924931529,
      0.6371801825583691,
      0.9536874307467749,
      0.6737827210819871,
      0.6134684449166095,
      0.21158319619036225,
      0.6953503218499579,
      0.864233547604459
    ],
    [
      0.19486126566169182,
      0.1627340707388896,
      0.002485121505591901,
      0.9175408591307512,
      0.5427600432830094,
      0.9096760548521661,
      0.7011816090097922,
      0.23541322501391787,
      0.1351921208115067,
      0.6079561593676153
    ],
    [
      0.8887147711445691,
      0.5851104377777825,
      0.42034372273803755,
      0.0345950275456024,
      0.6197669555136256,
      0.015561769501147849,
      0.8762496099870802,
      0.1904411117511593,
      0.2510828185916836,
      0.8034499333216452
    ],
    [
      0.32200059810400405,
      0.17160944568917733,
      0.2387291943990161,
      0.8839992235414942,
      0.9743269077699941,
      0.1911157075536314,
      0.5499935126569491,
      0.5092585990603544,
      0.7382888810510453,
      0.7573366280327638
    ],
    [
      0.8267788001218042,
      0.4161066160184723,
      0.4513646697174809,
      0.5531936059580123,
      0.8175577853112543,
      0.5042342032633136,
      0.7294023558098377,
      0.8036107898025804,
      0.3725425314313475,
      0.52514717358531
    ],
    [
      0.31129740907365083,
      0.9144689077517294,
      0.750983605330785,
      0.5053816909905677,
      0.83804840556299,
      0.04404909471059515,
      0.11263028253392737,
      0.3309272454427665,
      0.8079930512756288,
      0.9652610675087869
    ],
    [
      0.6577937821256428,
      0.46292584447806395,
      0.5378757011074871,
      0.10646639475027331,
      0.030626229232228352,
      0.15493005238980628,
      0.9043478048925988,
      0.2692544099399563,
      0.6945000772999859,
      0.36124800700786563
    ],
    [
      0.1543820693302903,
      0.5020341384675071,
      0.19482763429230265,
      0.8791470302110029,
      0.5208678404688165,
      0.9787325368513413,
      0.6346438315762986,
      0.6076617216847855,
      0.23504102895507462,
      0.9768136393842048
    ],
    [
      0.8086171409496634,
      0.17877764703421828,
      0.7044016088037235,
      0.3791216177669111,
      0.6965659552103051,
      0.2711473240362642,
      0.7904140767434502,
      0.8417793138877206,
      0.011521446120779056,
      0.10855517432245224
    ],
    [
      0.04549984466852542,
      0.9566363303402006,
      0.6436801669064279,
      0.75932627734909,
      0.21637665990260116,
      0.7351123698485077,
      0.2514629681189715,
      0.711213835807639,
      0.33298430081390434,
      0.6759810410131444
    ],
    [
      0.31613475917545086,
      0.026985584792513118,
      0.04241295124208877,
      0.8438524423196709,
      0.30524624089945007,
      0.9599024031289833,
      0.2812862083698371,
      0.5137316972164714,
      0.06618507114367449,
      0.6431143948716329
    ],
    [
      0.687275516269163,
      0.23170043613779634,
      0.9838206049873661,
      0.06068577444274803,
      0.8807767232658466,
      0.8946298581342866,
      0.22054529026315314,
      0.44889318879175155,
      0.7225520402506893,
      0.7782283212357395
    ],
    [
      0.8972691095677354,
      0.7607715073861103,
      0.4771996187616351,
      0.7147471479842191,
      0.4319460838181246,
      0.024467740364309078,
      0.6448927301034365,
      0.4343113814849586,
      0.357962809974325,
      0.32527731059184833
    ],
    [
      0.850211163375032,
      0.5305990265626468,
      0.41243519816428775,
      0.5347198231600976,
      0.6999065067418373,
      0.00828685472572881,
      0.3631604086467545,
      0.4749043776568193,
      0.7660314965152399,
      0.3254857653912327
    ],
    [
      1.0505680882786261,
      0.6208935225662303,
      0.5534287699583335,
      0.1058846908830328,
      0.9905424377618851,
      1.0756633863698286,
      0.01625644537405678,
      0.9753849599084057,
      0.6839094793125549,
      0.5032379227617221
    ],
    [
      0.49315699044546535,
      0.45561947802201663,
      0.10043787852273008,
      0.10294861511886881,
      0.07903234697936123,
      0.04605443764490347,
      0.6654707393616579,
      0.2331100293722738,
      0.4276051758650461,
      0.8430895523041989
    ],
    [
      0.8460547938187004,
      0.3193705193437748,
      0.943574474771633,
      0.46633893853867314,
      0.8024204278893723,
      0.1563401517402354,
      0.9949290334410892,
      0.3722454319007218,
      0.8881078057693628,
      0.7306135521548547
    ],
    [
      0.8806373197663311,
      0.4446156747041541,
      0.8243718462049547,
      0.8882148310699326,
      0.12105669597040225,
      0.8590608487783915,
      0.943813109107154,
      0.13117939290790132,
      0.7442977201625485,
      0.35361997502318454
    ],
    [
      0.16037687908274692,
      0.7451505395641577,
      0.29735786818418536,
      0.5962246540045075,
      0.25038348357324103,
      0.893061501844532,
      0.7149846370153428,
      0.3757850103682346,
      0.5731486142644562,
      0.06372917516299692
    ],
    [
      0.4065143879507095,
      0.11106301125243856,
      0.27331777947939107,
      0.18146534260867653,
      0.8174157434080073,
      0.4604004032294662,
      0.46928758480084704,
      0.62034528288729,
      0.7246480888120918,
      0.9453911871924185
    ],
    [
      0.5862197341813564,
      0.2722799094127447,
      0.680723481714766,
      0.485183146634266,
      0.1268234531714989,
      0.7493711726995012,
      0.3950576532739045,
      0.7648251665710408,
      0.23686845641499232,
      0.791218416812976
    ],
    [
      0.3836913957802197,
      0.5963919414460133,
      0.5551543716189676,
      1.0399303624208887,
      0.3362987097900274,
      0.8602583597190203,
      0.8509734204362442,
      0.7936069266060237,
      0.7857703958348139,
      0.4835382151909284
    ],
    [
      0.1229401783531685,
      0.5016692607668547,
      0.21859727669659912,
      1.163999128876319,
      0.16054758837851899,
      0.20773802155881937,
      0.9229203697064663,
      0.5740138731136473,
      0.21006830095249887,
      0.1331599228563059
    ],
    [
      0.8837213465933316,
      0.6240744846716542,
      0.6884149837073118,
      0.7483790664203648,
      0.21287120743040933,
      0.4700509423282675,
      0.9721291183146274,
      0.04633491135829382,
      0.32071725248091254,
      0.19958338775769532
    ],
    [
      0.07524127230501032,
      0.02117120502580865,
      0.8554449041620003,
      0.9527904161691574,
      0.27743923010573135,
      0.9473451549327052,
      0.7399699643454405,
      0.6883010945740602,
      0.14082662630758613,
      0.622378335289201
    ],
    [
      0.6401567961891774,
      0.30825487680363994,
      0.4887165783614835,
      0.962760383448422,
      0.7740563621129273,
      0.8707524860972531,
      0.8163987064246326,
      0.7942792752145968,
      0.3484474058965239,
      0.4971961472363582
    ],
    [
      0.05814954945195119,
      0.6416255461772287,
      0.3838711894162265,
      0.0227755670087197,
      0.124010646913989,
      0.27197329359753075,
      0.816702889673908,
      0.31502162288882385,
      1.0826819777361474,
      0.45021951965290047
    ],
    [
      0.44365884295156044,
      0.8720205411336381,
      0.5512896755730634,
      0.7722857935268739,
      0.1664964308741216,
      0.8598249881803277,
      0.3912802239919684,
      0.6296368493915396,
      0.2646817596530304,
      0.25065109583889855
    ],
    [
      0.8894272630111582,
      0.5178844055084663,
      0.8964538702368987,
      0.854850769204943,
      0.5597261688154991,
      0.4656013505601342,
      0.7502537155927272,
      0.2733308654594038,
      0.4985312574496998,
      0.11490136226344548
    ],
    [
      0.18539620250833289,
      0.9643594187796669,
      0.9578498165309541,
      0.4739784224561452,
      0.9642237828895952,
      0.373374195713555,
      0.7431883013079128,
      0.48829726476720414,
      0.298185454334402,
      0.06378680663797764
    ],
    [
      0.15022519996490738,
      0.7286873381846648,
      0.5550137898635112,
      0.5423691278662548,
      1.0512569446135192,
      0.29963342899915113,
      0.5330585782086824,
      0.5064989198723147,
      0.7537606271488317,
      0.9103814837916953
    ],
    [
      0.9032112704887825,
      0.8262736242663145,
      0.5027821314713081,
      0.33710825075226913,
      1.1787247797087976,
      0.8790845785726931,
      0.11120177949640087,
      0.7815850784259135,
      0.16595050543971382,
      0.8626344824494254
    ],
    [
      0.13734152261730326,
      0.337000803076678,
      0.7844008761752175,
      0.8837182614670097,
      0.4452039973423607,
      0.12950529105121944,
      0.24969586217203107,
      0.1357201304505224,
      0.8278709281541873,
      0.23400819220919722
    ],
    [
      0.475741166928918,
      0.028533756735666053,
      0.07187311980951083,
      0.6667167977515491,
      0.2755843923235501,
      0.00471585198554525,
      0.7102853875236452,
      0.08348893845417556,
      0.02838743681359759,
      0.5950430044104748
    ],
    [
      0.08907790439218921,
      0.4155584061994606,
      0.61490940137391,
      0.47600735990671383,
      0.12592967216610923,
      0.0035167934626776365,
      0.3449627873387586,
      0.9471316929274649,
      0.03977975339063522,
      0.020946221188181503
    ],
    [
      0.0697841097178843,
      0.2265145795342907,
      0.5188236423919537,
      0.41432900110230453,
      0.5318331513400459,
      0.11147386921133542,
      0.8168805853374963,
      0.4589810441185769,
      0.46390640734144606,
      0.2716785146755347
    ],
    [
      0.4671651177711067,
      0.1198265952576607,
      0.43864989780723906,
      0.5799735060546476,
      1.0887071195146742,
      0.5488019634118899,
      0.852409316026026,
      0.9992768445490409,
      0.29780506701555964,
      0.46599247731389304
    ],
    [
      0.14174099777480859,
      0.09742415551455585,
      0.6310789013899902,
      0.2827354067758052,
      0.008099908099224779,
      0.39546682677513134,
      0.08966777828324313,
      0.5057502020394132,
      0.21178920189023476,
      0.7701009377473527
    ],
    [
      0.21292044131075616,
      0.14609188033833187,
      0.48501274683197515,
      0.6609671538391215,
      0.43389857583911823,
      0.4029689191661409,
      0.0897618908578717,
      0.9649554830764309,
      0.5336810580688842,
      0.31396506049656425
    ],
    [
      0.0070005683727210055,
      0.7337094748539965,
      0.15236810605805307,
      0.1236234075978846,
      0.7021842119512349,
      0.5968010635935297,
      0.8185100606971969,
      0.7212517792465886,
      0.9573070223999689,
      0.20577403791748128
    ],
    [
      0.35837542568158387,
      0.01606993124772682,
      0.16878854000854937,
      0.6893629410274633,
      0.9604201242377537,
      0.4343963929056845,
      0.005352982353054037,
      0.6949099475544637,
      0.610342064501469,
      0.47143449390823755
    ],
    [
      0.1588328546449984,
      0.07943933946606374,
      0.03117301177699531,
      0.7163869320856451,
      0.5610175674994275,
      0.7998041080605449,
      0.5257819049327078,
      0.9418075449029633,
      0.4159887374700797,
      0.10196256494253797
    ],
    [
      0.6009502061649739,
      0.20264227878461893,
      0.757965688103334,
      0.5447358610678648,
      0.07272374462791037,
      0.5086140014395841,
      0.10427622017654255,
      0.9478024682186628,
      0.35834577902512965,
      0.8390278172524966
    ],
    [
      0.21940643322453002,
      0.21109330375237145,
      0.1652630939739821,
      0.5327010860334211,
      0.11462764179000984,
      0.4527031162333059,
      0.4793177314322705,
      0.6104301826409073,
      0.07002253584624651,
      0.601995760293571
    ],
    [
      0.7477440327265429,
      0.1834302293113038,
      0.15296346642370473,
      0.04419995221812974,
      0.520843227815742,
      0.2130869665712134,
      0.6492599393574432,
      0.07602697788378054,
      0.8179299038389007,
      0.5748909011919612
    ],
    [
      0.3398127623505976,
      0.6971301173925311,
      0.4531153733602296,
      0.7403307722192125,
      0.7084178786443902,
      0.15326983630959826,
      0.7522317976439155,
      0.6553597011976904,
      0.48994335908674613,
      0.7624968569333553
    ],
    [
      0.2881920805686225,
      0.6675771575864229,
      0.32631486884218774,
      0.9052325178005716,
      0.5448767673336585,
      0.6865253007989087,
      1.019102756499369,
      0.05416805503296266,
      0.3007272009288262,
      0.5480975210025542
    ],
    [
      0.626351812675513,
      0.6407013653080296,
      0.6714205356584465,
      0.8885431133614399,
      0.21321982529272754,
      0.780217988649903,
      0.8715231706770763,
      0.6534710864938678,
      0.6929363943817837,
      0.8350403584488615
    ],
    [
      0.22487399221606344,
      0.427251628559632,
      0.16497878203249172,
      0.11033831117209221,
      0.2230719808657893,
      0.5178719133778581,
      0.08821499518385512,
      0.6335797429119299,
      0.5362381358757723,
      0.8970777816956174
    ],
    [
      0.12750450924469103,
      0.766315632341304,
      0.7626387643128849,
      0.9459055487330339,
      0.15300876037628494,
      0.2894793682174688,
      1.1013002509039294,
      0.041462389254059984,
      0.94058851821785,
      0.8196462642095227
    ],
    [
      0.040205752871550704,
      0.2535756085096718,
      0.17373142765853955,
      0.532089105079036,
      0.6184020456617929,
      0.4488908454180647,
      0.4658037781023381,
      0.388230475110128,
      0.1724130078700068,
      0.676235991104653
    ],
    [
      0.701076354688479,
      0.6662232003750508,
      0.8850098497147052,
      0.40334187945568933,
      0.7984971151149777,
      0.5549974964128866,
      0.36543879817516767,
      0.5408561540473769,
      1.0597726888205306,
      0.5369421864860475
    ],
    [
      0.8129300707635121,
      0.5624469547846132,
      0.3619363951523482,
      0.8233729688315157,
      0.3474272396568867,
      0.1775261992423006,
      0.4765549749630796,
      0.07381499021600156,
      0.11090267389207227,
      0.22839730158917004
    ],
    [
      1.0248079036926345,
      0.35847509354748874,
      0.8932287652272275,
      0.6760452453241832,
      0.1528039112518722,
      0.4132778930694827,
      0.9074614714416387,
      0.2715213657360729,
      0.8353768275978601,
      0.9456259736582071
    ],
    [
      0.661922259427246,
      0.6695789385222715,
      0.004352266662690285,
      0.3103507663333567,
      0.7288080465308784,
      0.3529334798398425,
      0.017207403809322397,
      0.5829435361619776,
      0.9000140541823254,
      0.04716599085163464
    ],
    [
      0.7344841015904188,
      0.46059807363987904,
      0.8151522827799186,
      0.7614116236371548,
      0.8526577026633835,
      0.6803631665987534,
      0.5933454393377342,
      0.14112040076993587,
      0.5663389256166016,
      0.75953985198573
    ],
    [
      0.712536245597305,
      0.9118343488393144,
      0.9344670051774174,
      0.8505756005423433,
      0.48699433777285717,
      0.25423290296942,
      0.4835827542805196,
      0.24476548416888888,
      0.5926302332341237,
      0.47735753761620936
    ],
    [
      0.6318726378932424,
      0.021082062219206277,
      0.7532119818480179,
      0.8463704298572068,
      0.3115382030761924,
      0.6283646752611511,
      0.5266272248214117,
      0.9968965277128166,
      0.9665728557004343,
      0.49645719463644444
    ],
    [
      0.4858200900251566,
      0.5280236933526908,
      0.39254609163711973,
      0.061447745354088035,
      0.9424530576154069,
      0.25511966315391965,
      0.8082128694013937,
      0.40382949538717133,
      0.6935949446840199,
      0.8102410030159357
    ],
    [
      0.24514032903931024,
      0.32303969303614205,
      0.49386722151284307,
      0.5868318490632504,
      0.5510434773662949,
      0.02980354546867823,
      0.793909256700167,
      0.4963063288294709,
      0.1367067210723656,
      0.4825791242912588
    ],
    [
      0.1047858578069163,
      0.5220474194343443,
      0.9754044574277939,
      0.7417057043596502,
      0.23721304940716448,
      0.10620321897400031,
      0.16070669367934523,
      0.5967485182453494,
      0.5288262582913449,
      0.7036536666158217
    ]
  ]

  var wLO = [
    [
      0.9072339353230421,
      0.5077629036133148,
      0.2767903455418615,
      0.17829562995445267
    ],
    [
      0.8445341541264034,
      0.24235065813473958,
      0.09851839592256466,
      0.2928416535729318
    ],
    [
      0.7529808874030036,
      0.01630519599326842,
      0.1607900486976388,
      0.3936530933814711
    ],
    [
      0.07339120668872609,
      0.3426901664896433,
      0.29167114518027654,
      0.3204308076744801
    ],
    [
      1.4099702967419379,
      0.4722027818234349,
      0.18039566501089466,
      0.6283452338065043
    ],
    [
      0.8217331374989713,
      0.9463618071015512,
      0.1962038353642631,
      0.8084908286050614
    ],
    [
      0.7096228330007309,
      0.00019620393619495673,
      0.23643257889454175,
      0.3082520679531887
    ],
    [
      0.8949344348393863,
      0.5421449065717548,
      0.115657538792694,
      0.7051416191930443
    ],
    [
      1.1590808719498975,
      0.35364700430734275,
      0.3051053413193845,
      0.5875606462027992
    ],
    [
      0.3743744662101184,
      0.40217609496667484,
      0.46241193473030123,
      0.5794404526390751
    ]
  ]
  var output = math.multiply(math.multiply(input, wIL), wLO)
  // console.log(output)
  var output_3 = output.map((e) => { return Math.pow(e, 2) })
  // console.log(output_3)
  var sum = output_3.reduce((a, b) => { return a + b })
  // console.log(sum)
  var prob = output_3.map((e) => { return e / sum })
  console.log(prob)
  action = moves[prob.indexOf(pickOne(prob))];
  // action = moves[Math.floor(Math.random() * 4)];
  res.send(action);
});

if (process.env.NODE_ENV !== 'test') {
  console.log(`MY_URL is ${myUrl}`)
  app.listen(port, () => console.log(`Listening on port ${port}`))
}

module.exports = app

pickOne = (list) => {
  var index = 0;
  var r = Math.random()

  while (r > 0) {
    r = r - list[index]
    index++
  }
  index--
  return list[index]
}
